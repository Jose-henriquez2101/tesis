<div class="content">
<div class="container mt-4">
  <h2>Panel de Control - Sesiones VR</h2>
  <p class="capacitador-info">
    ๐ค Capacitador: <strong>{{ capacitadorNombre }}</strong>
    <span class="id-tag">ID {{ capacitadorId }}</span>
  </p>
ย ย 

    <!-- Mensajes de estado -->
    <div *ngIf="loading" class="alert alert-info">Cargando datos...</div>
ย   <div *ngIf="errorMsg" class="alert alert-danger">{{ errorMsg }}</div>
ย   <div *ngIf="successMsg" class="alert alert-success">{{ successMsg }}</div>

ย ย <!-- Interfaz de Asignaciรณn de Sesiรณn (se muestra cuando hay una estaciรณn Unity en espera) -->
ย ย <div *ngIf="pendingStationId; else esperando" class="card-moderno fade-in">

ย ย ย <h3 class="section-title">Asignar Sesiรณn a Estaciรณn VR</h3>

ย ย ย <div class="info-grid mb-4">
ย ย ย ย <div class="info-item">
ย ย ย ย ย <span>Estaciรณn VR en Espera:</span>
ย ย ย ย ย <strong>{{ pendingStationId }}</strong>
ย ย ย ย </div>
ย ย ย </div>

ย ย ย <div class="select-box">
ย ย ย ย <label>Seleccionar Bombero a Evaluar:</label>
ย ย ย ย <select [(ngModel)]="bomberoSeleccionadoId" name="bomberoSelect">
ย ย ย ย ย <option [ngValue]="null" disabled>-- Elija un Bombero --</option>
ย ย ย ย ย <option *ngFor="let b of bomberosDisponibles" [ngValue]="b.ID_Bombero">
ย ย ย ย ย ย {{ b.NombreCompleto }} (RUT: {{ b.Rut }})
ย ย ย ย ย </option>
ย ย ย ย </select>
ย ย ย </div>

ย ย ย <div class="select-box">
ย ย ย ย <label>Seleccionar Escenario de Entrenamiento:</label>
ย ย ย ย <select [(ngModel)]="escenarioSeleccionadoId" name="escenarioSelect">
ย ย ย ย ย <option [ngValue]="null" disabled>-- Elija un Escenario --</option>
ย ย ย ย ย <option *ngFor="let esc of escenarios" [ngValue]="esc.id_Escenario">
ย ย ย ย ย ย {{ esc.NombreEscenario }}
ย ย ย ย ย </option>
ย ย ย ย </select>
ย ย ย </div>

ย ย ย <button 
ย ย ย ย class="btn-modern"
ย ย ย ย (click)="iniciarSimulacion()"
ย ย ย ย [disabled]="!bomberoSeleccionadoId || !escenarioSeleccionadoId || loading"
ย ย ย >
ย ย ย ย {{ loading ? 'Enviando Comando...' : 'Asignar Bombero e Iniciar Simulaciรณn' }}
ย ย ย </button>

ย ย </div>

ย ย <!-- Plantilla de espera -->
ย ย <ng-template #esperando>
ย ย ย <div class="waiting-card fade-in">
ย ย ย ย <h3>โณ Esperando seรฑal de la estaciรณn VR...</h3>
ย ย ย ย <p>
ย ย ย ย ย El bombero debe presionar "Iniciar Simulaciรณn" en el visor.
ย ย ย ย </p>
ย ย ย </div>
ย ย </ng-template>

</div>
</div>